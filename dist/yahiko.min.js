"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}();!function(t,i,e){var s="yahiko",n={loop:!1,useDots:!1,useTimer:!1,slideTimeout:6e3,preAnimationTime:150,moveTime:300,el:""+s,item:s+"__item",dots:s+"__dots",dot:s+"__dot",inner:s+"__inner",tracker:s+"__tracker",navNext:s+"__next",navPrev:s+"__prev",itemActive:s+"__active",preContainer:s+"__precontainer",stage:s+"__stage",transition:s+"__transition",dotCurrent:s+"__dot_current",transforms:{webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},transitionEnd:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"}},o=function(){function i(t,e){_classCallCheck(this,i),this.index=0,this.cacheObjects(t,e),this.numerateItems(),this.initDots(),this.bindEvents(),this.createTracker(),this.displayNav(),this.createPreSliders(),this.createStages(),this.setStage(),this.setSize(),this.setCurrIndex(0),this.triggerSelectItem(this.index),this.setInitialHeight()}return _createClass(i,[{key:"getPrefixed",value:function(t){var i=document.createElement("p").style,e=["Webkit","Moz","O","ms"],s=void 0;return""==i[t]?t:(t=t.charAt(0).toUpperCase()+t.slice(1),e.forEach(function(e){s=e+t,""==i[s]&&(t=s)}),t)}},{key:"has3d",value:function(){var t=document.createElement("p"),i=void 0,s=this.options.transforms;document.body.insertBefore(t,null);for(var n in s)t.style[n]!==e&&(t.style[n]="translate3d(1px, 1px, 1px)",i=window.getComputedStyle(t).getPropertyValue(s[n]));return document.body.removeChild(t),i!==e&&i.length>0&&"none"!==i}},{key:"addEvent",value:function(t,i,e,s){i&&(t.addEventListener?t.addEventListener(i,e,!!s):t.attachEvent("on"+i,e))}},{key:"bindTransitionEnd",value:function(t){var i=t.data();if(!i.tEnd){var e=t[0],s=this.options.transitionEnd;this.addEvent(e,s[this.getPrefixed("transition")],function(t){i.tProp&&t.propertyName.match(i.tProp)&&i.onEndFn()}),i.tEnd=!0}}},{key:"afterTransition",value:function(t,i,e,s){var n=void 0,o=t.data();o&&(o.onEndFn=function(){n||(n=!0,clearTimeout(o.tT),s())},o.tProp=i,clearTimeout(o.tT),o.tT=setTimeout(function(){o.onEndFn()},1.5*e),this.bindTransitionEnd(t))}},{key:"cacheObjects",value:function(i,e){this.stages={prev:0,curr:0,next:0},this.$activeDot=t({}),this.options=t.extend({},n,e),this.isMoved=!1,this.$activeSlide=null,this.$nullBox=t("<div>"),this.$dotsBox=t({}),this.$el=i,this.$els=i.find("."+this.options.item),this.$inner=i.find("."+this.options.inner),this.$navNext=i.find("."+this.options.navNext),this.$navPrev=i.find("."+this.options.navPrev),this.transform=this.getPrefixed("transform"),this.has3d=this.has3d()}},{key:"disableSelection",value:function(){}},{key:"triggerSelectItem",value:function(t){this.$el.trigger("yahiko:select",[t,this.$els.eq(t)])}},{key:"bindEvents",value:function(){t(window).on("resize",this.onResize.bind(this)),this.disableSelection(this.$el[0]),this.$els.length>1&&(this.$dotsBox.on("click","."+this.options.dot+":not(."+this.options.dotCurrent+")",this.onDotClick.bind(this)),this.$el.on("mouseenter",this.onMouseEnter.bind(this)),this.$el.on("mouseleave",this.onMouseLeave.bind(this)),this.$navNext.click(this.onClickNext.bind(this)),this.$navPrev.click(this.onClickPrev.bind(this)),this.$navNext.mouseenter(this.onShowNextPrePanel.bind(this)),this.$navNext.mouseleave(this.onHideNextPrePanel.bind(this)),this.$navPrev.mouseenter(this.onShowPrevPrePanel.bind(this)),this.$navPrev.mouseleave(this.onHidePrevPrePanel.bind(this)))}},{key:"initDots",value:function(){this.$els.length>1&&this.options.useDots&&(this.createDots(),this.setActiveDot(0),this.startTimer())}},{key:"createStages",value:function(){this.$prevStage=t("<div>").addClass(this.options.stage+" "+this.options.stage+"_prev").appendTo(this.$tracker),this.$currStage=t("<div>").addClass(this.options.stage+" "+this.options.stage+"_curr").appendTo(this.$tracker),this.$nextStage=t("<div>").addClass(this.options.stage+" "+this.options.stage+"_next").appendTo(this.$tracker)}},{key:"setStage",value:function(){this.stages={prev:this.getPrevIndex(),curr:this.index,next:this.getNextIndex()},this.$prevStage.append(this.$els.eq(this.stages.prev)),this.$nextStage.append(this.$els.eq(this.stages.next)),this.$currStage.append(this.$els.eq(this.stages.curr))}},{key:"getPrevIndex",value:function(){return 0===this.index?this.count:this.index-1}},{key:"getNextIndex",value:function(){return this.index===this.count?0:this.index+1}},{key:"setCurrIndex",value:function(t){t===this.count+1?this.index=0:0>t?this.index=this.count:this.index=t}},{key:"numerateItems",value:function(){for(var t=0;t<this.$els.length;t++)this.$els.eq(t).addClass(this.options.item+"-"+t)}},{key:"createPreSliders",value:function(){this.$els.appendTo(this.$nullBox),this.$preSliders=this.$els.clone().hide(),this.$preContainer=t("<div>").addClass(this.options.preContainer).append(this.$preSliders).insertAfter(this.$tracker),this.$preContainer.hide()}},{key:"startTimer",value:function(){this.options.useTimer&&(this.timeoutCallback=setTimeout(function(){this.setCurrIndex(this.index+1),this.triggerSelectItem(this.index),this.move(this.index,1),this.setActiveDot(this.index),this.displayNavByIndex(),this.startTimer()}.bind(this),this.options.slideTimeout))}},{key:"createTracker",value:function(){var i=this.$inner.children();this.count=this.$els.length-1,this.$tracker=t("<div>").append(i).appendTo(this.$inner),this.$tracker.addClass(this.options.tracker)}},{key:"onResize",value:function(){this.setSize(),this.setInitialHeight()}},{key:"setSize",value:function(){this.options.preContainerOffset=this.$preContainer.width(),this.trackerWidth=this.$el.width(),this.preContainerCenter=this.trackerWidth/2-this.options.preContainerOffset/2,this.$tracker.width(this.trackerWidth),this.$els.width(this.trackerWidth),this.$preSliders.width(this.trackerWidth),this.$inner.width(this.trackerWidth),this.$prevStage.css({left:-this.trackerWidth}),this.$nextStage.css({left:this.trackerWidth})}},{key:"onShowPrevPrePanel",value:function(){(this.index>0||this.options.loop)&&(this.$preContainer.show().css({left:-this.options.preContainerOffset,right:""}).stop().animate({left:0},this.options.preAnimationTime).data("move","left"),this.$activeSlide&&this.$activeSlide.hide(),this.$activeSlide=this.$preSliders.eq(this.getPrevIndex()),this.$activeSlide.show().css({left:-this.preContainerCenter}))}},{key:"onHidePrevPrePanel",value:function(){(this.index>0||this.options.loop)&&this.$preContainer.stop().animate({left:-this.options.preContainerOffset},this.options.preAnimationTime,function(){this.$preContainer.hide()}.bind(this))}},{key:"onShowNextPrePanel",value:function(){(this.index<this.count||this.options.loop)&&(this.$preContainer.show().css({right:-this.options.preContainerOffset,left:""}).stop().animate({right:0},this.options.preAnimationTime).data("move","right"),this.$activeSlide&&this.$activeSlide.hide(),this.$activeSlide=this.$preSliders.eq(this.getNextIndex()),this.$activeSlide.show().css({left:-this.preContainerCenter}))}},{key:"onHideNextPrePanel",value:function(){(this.index<this.count||this.options.loop)&&this.$preContainer.stop().animate({right:-this.options.preContainerOffset},this.options.preAnimationTime,function(){this.$preContainer.hide()}.bind(this))}},{key:"onClickNext",value:function(){this.moveByNav(1),this.displayNavByIndex()}},{key:"onClickPrev",value:function(){this.moveByNav(-1),this.displayNavByIndex()}},{key:"displayNav",value:function(){this.options.loop&&this.count>2?(this.$navPrev.show(),this.$navNext.show()):this.displayNavByIndex()}},{key:"displayNavByIndex",value:function(){this.options.loop||(this.index>0?this.$navPrev.show():this.$navPrev.hide(),this.index===this.count?this.$navNext.hide():this.$navNext.show())}},{key:"onMoveEnd",value:function(){this.$tracker.find("."+this.options.item).appendTo(this.$nullBox),this.has3d?(this.$tracker.removeClass(this.options.transition),this.$tracker[0].style[this.transform]="translateX(0)"):this.$tracker.removeClass(this.options.transition).css({left:0}),this.setStage(),this.isMoved=!1}},{key:"moveByNav",value:function(t){this.isMoved||(this.setCurrIndex(this.index+t),this.triggerSelectItem(this.index),this.move(this.index,t),this.setActiveDot(this.index))}},{key:"onMouseEnter",value:function(){clearTimeout(this.timeoutCallback)}},{key:"onMouseLeave",value:function(){this.startTimer()}},{key:"onDotClick",value:function(i){var e=this.$dotsEls.index(t(i.target).closest("."+this.options.dot)),s=this.index-e>0?-1:1;this.setCurrIndex(e),s>0&&this.stages.next!==this.index?(this.$nextStage.find("."+this.options.item).appendTo(this.$nullBox),this.$nextStage.append(this.$els.eq(this.index))):0>s&&this.stages.prev!==this.index&&(this.$prevStage.find("."+this.options.item).appendTo(this.$nullBox),this.$prevStage.append(this.$els.eq(this.index))),this.move(this.index,s),this.setActiveDot(this.index),this.displayNavByIndex()}},{key:"move",value:function(t,i){this.isMoved=!0;var e=this.$preContainer.data("move"),s={};s[e]=-this.options.preContainerOffset,this.$preContainer.animate(s,this.options.preAnimationTime),this.has3d?(this.$tracker.addClass(this.options.transition),this.$tracker[0].style[this.transform]="translateX("+-i*this.trackerWidth+"px)",this.afterTransition(this.$tracker,"transform",this.options.moveTime,function(){this.onMoveEnd(),console.log("transitionEnd")}.bind(this))):this.$tracker.stop().animate({left:-i*this.trackerWidth+"px"},this.options.moveTime,this.onMoveEnd.bind(this))}},{key:"setInitialHeight",value:function(){this.$inner.height(this.$el.height())}},{key:"setActiveDot",value:function(t){this.options.useDots&&(this.$activeDot.removeClass(this.options.dotCurrent),this.$activeDot=this.$dotsEls.eq(t).addClass(this.options.dotCurrent))}},{key:"createDots",value:function(){var i=document.createDocumentFragment(),e=void 0;this.$dotsBox=t("<ul>").addClass(this.options.dots);for(var s=0,n=this.$els.length;n>s;s++)e=t("<li>").addClass(this.options.dot).append("<i></i>"),i.appendChild(e[0]);this.$dotsBox[0].appendChild(i),this.$dotsEls=this.$dotsBox.find("."+this.options.dot),this.$el.append(this.$dotsBox),this.$dotsBox.width(this.$dotsBox.width()),this.$dotsEls.eq(0).addClass(this.options.dotCurrent),this.$dotsBox.css("marginLeft",-this.$dotsBox.width()/2)}},{key:"destroy",value:function(){}},{key:"on",value:function(){}},{key:"index",value:function(){}}]),i}();t.fn.Yahiko=function(i){return t(this).each(function(){var e=t(this);e.data("Yahiko")?console.log("Yahiko already init",e):e.data("Yahiko",new o(e,i||{}))})}}(jQuery,window,void 0);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInlhaGlrby5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIiQiLCJyb290IiwidW5kZWZpbmVkIiwibmFtZXNwYWNlIiwiZGVmYXVsdHMiLCJsb29wIiwidXNlRG90cyIsInVzZVRpbWVyIiwic2xpZGVUaW1lb3V0IiwicHJlQW5pbWF0aW9uVGltZSIsIm1vdmVUaW1lIiwiZWwiLCJpdGVtIiwiZG90cyIsImRvdCIsImlubmVyIiwidHJhY2tlciIsIm5hdk5leHQiLCJuYXZQcmV2IiwiaXRlbUFjdGl2ZSIsInByZUNvbnRhaW5lciIsInN0YWdlIiwidHJhbnNpdGlvbiIsImRvdEN1cnJlbnQiLCJ0cmFuc2Zvcm1zIiwid2Via2l0VHJhbnNmb3JtIiwiT1RyYW5zZm9ybSIsIm1zVHJhbnNmb3JtIiwiTW96VHJhbnNmb3JtIiwidHJhbnNmb3JtIiwidHJhbnNpdGlvbkVuZCIsIldlYmtpdFRyYW5zaXRpb24iLCJNb3pUcmFuc2l0aW9uIiwiT1RyYW5zaXRpb24iLCJtc1RyYW5zaXRpb24iLCJZYWhpa28iLCIkZWwiLCJvcHRpb25zIiwidGhpcyIsImluZGV4IiwiY2FjaGVPYmplY3RzIiwibnVtZXJhdGVJdGVtcyIsImluaXREb3RzIiwiYmluZEV2ZW50cyIsImNyZWF0ZVRyYWNrZXIiLCJkaXNwbGF5TmF2IiwiY3JlYXRlUHJlU2xpZGVycyIsImNyZWF0ZVN0YWdlcyIsInNldFN0YWdlIiwic2V0U2l6ZSIsInNldEN1cnJJbmRleCIsInRyaWdnZXJTZWxlY3RJdGVtIiwic2V0SW5pdGlhbEhlaWdodCIsInZhbHVlIiwicHJvcCIsImVsZW1TdHlsZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicHJlZml4ZXMiLCJwcm9wV2l0aFByZWZpeCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJmb3JFYWNoIiwicHJlZml4IiwiYXZhaWxhYmxlM2QiLCJib2R5IiwiaW5zZXJ0QmVmb3JlIiwicHJvcE5hbWUiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInJlbW92ZUNoaWxkIiwiZSIsImZuIiwiYm9vbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsImVsRGF0YSIsImRhdGEiLCJ0RW5kIiwidHJhbnNpdGlvbkVuZEV2ZW50IiwiYWRkRXZlbnQiLCJnZXRQcmVmaXhlZCIsInRQcm9wIiwicHJvcGVydHlOYW1lIiwibWF0Y2giLCJvbkVuZEZuIiwicHJvcGVydHkiLCJ0aW1lIiwib2siLCJjbGVhclRpbWVvdXQiLCJ0VCIsInNldFRpbWVvdXQiLCJiaW5kVHJhbnNpdGlvbkVuZCIsInN0YWdlcyIsInByZXYiLCJjdXJyIiwibmV4dCIsIiRhY3RpdmVEb3QiLCJleHRlbmQiLCJpc01vdmVkIiwiJGFjdGl2ZVNsaWRlIiwiJG51bGxCb3giLCIkZG90c0JveCIsIiRlbHMiLCJmaW5kIiwiJGlubmVyIiwiJG5hdk5leHQiLCIkbmF2UHJldiIsImhhczNkIiwidHJpZ2dlciIsImVxIiwib24iLCJvblJlc2l6ZSIsImJpbmQiLCJkaXNhYmxlU2VsZWN0aW9uIiwib25Eb3RDbGljayIsIm9uTW91c2VFbnRlciIsIm9uTW91c2VMZWF2ZSIsImNsaWNrIiwib25DbGlja05leHQiLCJvbkNsaWNrUHJldiIsIm1vdXNlZW50ZXIiLCJvblNob3dOZXh0UHJlUGFuZWwiLCJtb3VzZWxlYXZlIiwib25IaWRlTmV4dFByZVBhbmVsIiwib25TaG93UHJldlByZVBhbmVsIiwib25IaWRlUHJldlByZVBhbmVsIiwiY3JlYXRlRG90cyIsInNldEFjdGl2ZURvdCIsInN0YXJ0VGltZXIiLCIkcHJldlN0YWdlIiwiYWRkQ2xhc3MiLCJhcHBlbmRUbyIsIiR0cmFja2VyIiwiJGN1cnJTdGFnZSIsIiRuZXh0U3RhZ2UiLCJnZXRQcmV2SW5kZXgiLCJnZXROZXh0SW5kZXgiLCJhcHBlbmQiLCJjb3VudCIsIiRwcmVTbGlkZXJzIiwiY2xvbmUiLCJoaWRlIiwiJHByZUNvbnRhaW5lciIsImluc2VydEFmdGVyIiwidGltZW91dENhbGxiYWNrIiwibW92ZSIsImRpc3BsYXlOYXZCeUluZGV4IiwiY2hpbGRzIiwiY2hpbGRyZW4iLCJwcmVDb250YWluZXJPZmZzZXQiLCJ3aWR0aCIsInRyYWNrZXJXaWR0aCIsInByZUNvbnRhaW5lckNlbnRlciIsImNzcyIsImxlZnQiLCJzaG93IiwicmlnaHQiLCJzdG9wIiwiYW5pbWF0ZSIsIm1vdmVCeU5hdiIsInJlbW92ZUNsYXNzIiwiZGlyZWN0aW9uIiwibmV3SW5kZXgiLCIkZG90c0VscyIsImNsb3Nlc3QiLCJ0byIsImRpcmVjdGlvbk5hbWUiLCJhZnRlclRyYW5zaXRpb24iLCJvbk1vdmVFbmQiLCJjb25zb2xlIiwibG9nIiwiaGVpZ2h0IiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaWxlbiIsImFwcGVuZENoaWxkIiwiZWFjaCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFN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LEdBQU92QixFQUFNeUIsWUFJbERnSixPQUFRL0csT0FBUXBFIiwiZmlsZSI6InlhaGlrby5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4oZnVuY3Rpb24gKCQsIHJvb3QsIHVuZGVmaW5lZCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBuYW1lc3BhY2UgPSAneWFoaWtvJztcblxuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgbG9vcDogZmFsc2UsXG4gICAgICAgIHVzZURvdHM6IGZhbHNlLFxuICAgICAgICB1c2VUaW1lcjogZmFsc2UsXG4gICAgICAgIHNsaWRlVGltZW91dDogNjAwMCxcbiAgICAgICAgcHJlQW5pbWF0aW9uVGltZTogMTUwLFxuICAgICAgICBtb3ZlVGltZTogMzAwLFxuICAgICAgICBlbDogJycgKyBuYW1lc3BhY2UsXG4gICAgICAgIGl0ZW06IG5hbWVzcGFjZSArICdfX2l0ZW0nLFxuICAgICAgICBkb3RzOiBuYW1lc3BhY2UgKyAnX19kb3RzJyxcbiAgICAgICAgZG90OiBuYW1lc3BhY2UgKyAnX19kb3QnLFxuICAgICAgICBpbm5lcjogbmFtZXNwYWNlICsgJ19faW5uZXInLFxuICAgICAgICB0cmFja2VyOiBuYW1lc3BhY2UgKyAnX190cmFja2VyJyxcbiAgICAgICAgbmF2TmV4dDogbmFtZXNwYWNlICsgJ19fbmV4dCcsXG4gICAgICAgIG5hdlByZXY6IG5hbWVzcGFjZSArICdfX3ByZXYnLFxuICAgICAgICBpdGVtQWN0aXZlOiBuYW1lc3BhY2UgKyAnX19hY3RpdmUnLFxuICAgICAgICBwcmVDb250YWluZXI6IG5hbWVzcGFjZSArICdfX3ByZWNvbnRhaW5lcicsXG4gICAgICAgIHN0YWdlOiBuYW1lc3BhY2UgKyAnX19zdGFnZScsXG4gICAgICAgIHRyYW5zaXRpb246IG5hbWVzcGFjZSArICdfX3RyYW5zaXRpb24nLFxuICAgICAgICBkb3RDdXJyZW50OiBuYW1lc3BhY2UgKyAnX19kb3RfY3VycmVudCcsXG4gICAgICAgIHRyYW5zZm9ybXM6IHtcbiAgICAgICAgICAgIHdlYmtpdFRyYW5zZm9ybTogJy13ZWJraXQtdHJhbnNmb3JtJyxcbiAgICAgICAgICAgIE9UcmFuc2Zvcm06ICctby10cmFuc2Zvcm0nLFxuICAgICAgICAgICAgbXNUcmFuc2Zvcm06ICctbXMtdHJhbnNmb3JtJyxcbiAgICAgICAgICAgIE1velRyYW5zZm9ybTogJy1tb3otdHJhbnNmb3JtJyxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zZm9ybSdcbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNpdGlvbkVuZDoge1xuICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbjogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxuICAgICAgICAgICAgTW96VHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnLFxuICAgICAgICAgICAgT1RyYW5zaXRpb246ICdvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCcsXG4gICAgICAgICAgICBtc1RyYW5zaXRpb246ICdNU1RyYW5zaXRpb25FbmQnLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIFlhaGlrbyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFlhaGlrbygkZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBZYWhpa28pO1xuXG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVPYmplY3RzKCRlbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLm51bWVyYXRlSXRlbXMoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdERvdHMoKTtcbiAgICAgICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUcmFja2VyKCk7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlOYXYoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUHJlU2xpZGVycygpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTdGFnZXMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U2l6ZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRDdXJySW5kZXgoMCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJTZWxlY3RJdGVtKHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5zZXRJbml0aWFsSGVpZ2h0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBfY3JlYXRlQ2xhc3MoWWFoaWtvLCBbe1xuICAgICAgICAgICAga2V5OiAnZ2V0UHJlZml4ZWQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFByZWZpeGVkKHByb3ApIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLnN0eWxlO1xuICAgICAgICAgICAgICAgIHZhciBwcmVmaXhlcyA9IFsnV2Via2l0JywgJ01veicsICdPJywgJ21zJ107XG4gICAgICAgICAgICAgICAgdmFyIHByb3BXaXRoUHJlZml4ID0gdm9pZCAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1TdHlsZVtwcm9wXSA9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBwcm9wID0gcHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3Auc2xpY2UoMSk7XG5cbiAgICAgICAgICAgICAgICBwcmVmaXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcFdpdGhQcmVmaXggPSBwcmVmaXggKyBwcm9wO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbVN0eWxlW3Byb3BXaXRoUHJlZml4XSA9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCA9IHByb3BXaXRoUHJlZml4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnaGFzM2QnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhczNkKCkge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgICAgICB2YXIgYXZhaWxhYmxlM2QgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybXMgPSB0aGlzLm9wdGlvbnMudHJhbnNmb3JtcztcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGVsLCBudWxsKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3BOYW1lIGluIHRyYW5zZm9ybXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsLnN0eWxlW3Byb3BOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZVtwcm9wTmFtZV0gPSAndHJhbnNsYXRlM2QoMXB4LCAxcHgsIDFweCknO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlM2QgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZ2V0UHJvcGVydHlWYWx1ZSh0cmFuc2Zvcm1zW3Byb3BOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBhdmFpbGFibGUzZCAhPT0gdW5kZWZpbmVkICYmIGF2YWlsYWJsZTNkLmxlbmd0aCA+IDAgJiYgYXZhaWxhYmxlM2QgIT09ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnYWRkRXZlbnQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50KGVsLCBlLCBmbiwgYm9vbCkge1xuICAgICAgICAgICAgICAgIGlmICghZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lciA/IGVsLmFkZEV2ZW50TGlzdGVuZXIoZSwgZm4sICEhYm9vbCkgOiBlbC5hdHRhY2hFdmVudCgnb24nICsgZSwgZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdiaW5kVHJhbnNpdGlvbkVuZCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmluZFRyYW5zaXRpb25FbmQoJGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsRGF0YSA9ICRlbC5kYXRhKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZWxEYXRhLnRFbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlbCA9ICRlbFswXTtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gdGhpcy5vcHRpb25zLnRyYW5zaXRpb25FbmQ7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50KGVsLCB0cmFuc2l0aW9uRW5kRXZlbnRbdGhpcy5nZXRQcmVmaXhlZCgndHJhbnNpdGlvbicpXSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxEYXRhLnRQcm9wICYmIGUucHJvcGVydHlOYW1lLm1hdGNoKGVsRGF0YS50UHJvcCkgJiYgZWxEYXRhLm9uRW5kRm4oKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGVsRGF0YS50RW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnYWZ0ZXJUcmFuc2l0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZnRlclRyYW5zaXRpb24oJGVsLCBwcm9wZXJ0eSwgdGltZSwgZm4pIHtcbiAgICAgICAgICAgICAgICB2YXIgb2sgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGVsRGF0YSA9ICRlbC5kYXRhKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsRGF0YS5vbkVuZEZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBvayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZWxEYXRhLnRUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgZWxEYXRhLnRQcm9wID0gcHJvcGVydHk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChlbERhdGEudFQpO1xuICAgICAgICAgICAgICAgICAgICBlbERhdGEudFQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsRGF0YS5vbkVuZEZuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHRpbWUgKiAxLjUpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZFRyYW5zaXRpb25FbmQoJGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2NhY2hlT2JqZWN0cycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FjaGVPYmplY3RzKCRlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2VzID0ge1xuICAgICAgICAgICAgICAgICAgICBwcmV2OiAwLFxuICAgICAgICAgICAgICAgICAgICBjdXJyOiAwLFxuICAgICAgICAgICAgICAgICAgICBuZXh0OiAwXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLiRhY3RpdmVEb3QgPSAkKHt9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNb3ZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuJGFjdGl2ZVNsaWRlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLiRudWxsQm94ID0gJCgnPGRpdj4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRkb3RzQm94ID0gJCh7fSk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwgPSAkZWw7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWxzID0gJGVsLmZpbmQoJy4nICsgdGhpcy5vcHRpb25zLml0ZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMuJGlubmVyID0gJGVsLmZpbmQoJy4nICsgdGhpcy5vcHRpb25zLmlubmVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRuYXZOZXh0ID0gJGVsLmZpbmQoJy4nICsgdGhpcy5vcHRpb25zLm5hdk5leHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuJG5hdlByZXYgPSAkZWwuZmluZCgnLicgKyB0aGlzLm9wdGlvbnMubmF2UHJldik7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLmdldFByZWZpeGVkKCd0cmFuc2Zvcm0nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhczNkID0gdGhpcy5oYXMzZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkaXNhYmxlU2VsZWN0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNhYmxlU2VsZWN0aW9uKCkge31cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAndHJpZ2dlclNlbGVjdEl0ZW0nLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXJTZWxlY3RJdGVtKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwudHJpZ2dlcigneWFoaWtvOnNlbGVjdCcsIFtpbmRleCwgdGhpcy4kZWxzLmVxKGluZGV4KV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdiaW5kRXZlbnRzJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICAgICAgICAgICQod2luZG93KS5vbigncmVzaXplJywgdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVTZWxlY3Rpb24odGhpcy4kZWxbMF0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuJGVscy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGRvdHNCb3gub24oJ2NsaWNrJywgJy4nICsgdGhpcy5vcHRpb25zLmRvdCArICc6bm90KC4nICsgdGhpcy5vcHRpb25zLmRvdEN1cnJlbnQgKyAnKScsIHRoaXMub25Eb3RDbGljay5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWwub24oJ21vdXNlZW50ZXInLCB0aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWwub24oJ21vdXNlbGVhdmUnLCB0aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmF2TmV4dC5jbGljayh0aGlzLm9uQ2xpY2tOZXh0LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRuYXZQcmV2LmNsaWNrKHRoaXMub25DbGlja1ByZXYuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5hdk5leHQubW91c2VlbnRlcih0aGlzLm9uU2hvd05leHRQcmVQYW5lbC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmF2TmV4dC5tb3VzZWxlYXZlKHRoaXMub25IaWRlTmV4dFByZVBhbmVsLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRuYXZQcmV2Lm1vdXNlZW50ZXIodGhpcy5vblNob3dQcmV2UHJlUGFuZWwuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5hdlByZXYubW91c2VsZWF2ZSh0aGlzLm9uSGlkZVByZXZQcmVQYW5lbC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2luaXREb3RzJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0RG90cygpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kZWxzLmxlbmd0aCA+IDEgJiYgdGhpcy5vcHRpb25zLnVzZURvdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVEb3RzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRG90KDApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2NyZWF0ZVN0YWdlcycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU3RhZ2VzKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHByZXZTdGFnZSA9ICQoJzxkaXY+JykuYWRkQ2xhc3ModGhpcy5vcHRpb25zLnN0YWdlICsgJyAnICsgdGhpcy5vcHRpb25zLnN0YWdlICsgJ19wcmV2JykuYXBwZW5kVG8odGhpcy4kdHJhY2tlcik7XG4gICAgICAgICAgICAgICAgdGhpcy4kY3VyclN0YWdlID0gJCgnPGRpdj4nKS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuc3RhZ2UgKyAnICcgKyB0aGlzLm9wdGlvbnMuc3RhZ2UgKyAnX2N1cnInKS5hcHBlbmRUbyh0aGlzLiR0cmFja2VyKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0U3RhZ2UgPSAkKCc8ZGl2PicpLmFkZENsYXNzKHRoaXMub3B0aW9ucy5zdGFnZSArICcgJyArIHRoaXMub3B0aW9ucy5zdGFnZSArICdfbmV4dCcpLmFwcGVuZFRvKHRoaXMuJHRyYWNrZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdzZXRTdGFnZScsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3RhZ2UoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFnZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXY6IHRoaXMuZ2V0UHJldkluZGV4KCksXG4gICAgICAgICAgICAgICAgICAgIGN1cnI6IHRoaXMuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IHRoaXMuZ2V0TmV4dEluZGV4KClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuJHByZXZTdGFnZS5hcHBlbmQodGhpcy4kZWxzLmVxKHRoaXMuc3RhZ2VzLnByZXYpKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0U3RhZ2UuYXBwZW5kKHRoaXMuJGVscy5lcSh0aGlzLnN0YWdlcy5uZXh0KSk7XG4gICAgICAgICAgICAgICAgdGhpcy4kY3VyclN0YWdlLmFwcGVuZCh0aGlzLiRlbHMuZXEodGhpcy5zdGFnZXMuY3VycikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdnZXRQcmV2SW5kZXgnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFByZXZJbmRleCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmRleCA9PT0gMCA/IHRoaXMuY291bnQgOiB0aGlzLmluZGV4IC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnZ2V0TmV4dEluZGV4JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROZXh0SW5kZXgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXggPT09IHRoaXMuY291bnQgPyAwIDogdGhpcy5pbmRleCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ3NldEN1cnJJbmRleCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q3VyckluZGV4KGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSB0aGlzLmNvdW50ICsgMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gdGhpcy5jb3VudDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdudW1lcmF0ZUl0ZW1zJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBudW1lcmF0ZUl0ZW1zKCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVscy5lcShpKS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuaXRlbSArICctJyArIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnY3JlYXRlUHJlU2xpZGVycycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJlU2xpZGVycygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbHMuYXBwZW5kVG8odGhpcy4kbnVsbEJveCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kcHJlU2xpZGVycyA9IHRoaXMuJGVscy5jbG9uZSgpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRwcmVDb250YWluZXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKHRoaXMub3B0aW9ucy5wcmVDb250YWluZXIpLmFwcGVuZCh0aGlzLiRwcmVTbGlkZXJzKS5pbnNlcnRBZnRlcih0aGlzLiR0cmFja2VyKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRwcmVDb250YWluZXIuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdzdGFydFRpbWVyJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydFRpbWVyKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnVzZVRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVvdXRDYWxsYmFjayA9IHNldFRpbWVvdXQoKGZ1bmN0aW9uIFRpbWVvdXRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJySW5kZXgodGhpcy5pbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJTZWxlY3RJdGVtKHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmUodGhpcy5pbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRG90KHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlOYXZCeUluZGV4KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcigpO1xuICAgICAgICAgICAgICAgIH0pLmJpbmQodGhpcyksIHRoaXMub3B0aW9ucy5zbGlkZVRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdjcmVhdGVUcmFja2VyJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVUcmFja2VyKCkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZHMgPSB0aGlzLiRpbm5lci5jaGlsZHJlbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSB0aGlzLiRlbHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLiR0cmFja2VyID0gJCgnPGRpdj4nKS5hcHBlbmQoY2hpbGRzKS5hcHBlbmRUbyh0aGlzLiRpbm5lcik7XG4gICAgICAgICAgICAgICAgdGhpcy4kdHJhY2tlci5hZGRDbGFzcyh0aGlzLm9wdGlvbnMudHJhY2tlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ29uUmVzaXplJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNpemUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEluaXRpYWxIZWlnaHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnc2V0U2l6ZScsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U2l6ZSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucHJlQ29udGFpbmVyT2Zmc2V0ID0gdGhpcy4kcHJlQ29udGFpbmVyLndpZHRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VyV2lkdGggPSB0aGlzLiRlbC53aWR0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJlQ29udGFpbmVyQ2VudGVyID0gdGhpcy50cmFja2VyV2lkdGggLyAyIC0gdGhpcy5vcHRpb25zLnByZUNvbnRhaW5lck9mZnNldCAvIDI7XG4gICAgICAgICAgICAgICAgdGhpcy4kdHJhY2tlci53aWR0aCh0aGlzLnRyYWNrZXJXaWR0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWxzLndpZHRoKHRoaXMudHJhY2tlcldpZHRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRwcmVTbGlkZXJzLndpZHRoKHRoaXMudHJhY2tlcldpZHRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRpbm5lci53aWR0aCh0aGlzLnRyYWNrZXJXaWR0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kcHJldlN0YWdlLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IC10aGlzLnRyYWNrZXJXaWR0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuJG5leHRTdGFnZS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLnRyYWNrZXJXaWR0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdvblNob3dQcmV2UHJlUGFuZWwnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uU2hvd1ByZXZQcmVQYW5lbCgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleCA+IDAgfHwgdGhpcy5vcHRpb25zLmxvb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcHJlQ29udGFpbmVyLnNob3coKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogLXRoaXMub3B0aW9ucy5wcmVDb250YWluZXJPZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJydcbiAgICAgICAgICAgICAgICAgICAgfSkuc3RvcCgpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMucHJlQW5pbWF0aW9uVGltZSkuZGF0YSgnbW92ZScsICdsZWZ0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWN0aXZlU2xpZGUgJiYgdGhpcy4kYWN0aXZlU2xpZGUuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRhY3RpdmVTbGlkZSA9IHRoaXMuJHByZVNsaWRlcnMuZXEodGhpcy5nZXRQcmV2SW5kZXgoKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGFjdGl2ZVNsaWRlLnNob3coKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogLXRoaXMucHJlQ29udGFpbmVyQ2VudGVyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnb25IaWRlUHJldlByZVBhbmVsJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkhpZGVQcmV2UHJlUGFuZWwoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPiAwIHx8IHRoaXMub3B0aW9ucy5sb29wKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHByZUNvbnRhaW5lci5zdG9wKCkuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtdGhpcy5vcHRpb25zLnByZUNvbnRhaW5lck9mZnNldFxuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMucHJlQW5pbWF0aW9uVGltZSwgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHByZUNvbnRhaW5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnb25TaG93TmV4dFByZVBhbmVsJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblNob3dOZXh0UHJlUGFuZWwoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPCB0aGlzLmNvdW50IHx8IHRoaXMub3B0aW9ucy5sb29wKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHByZUNvbnRhaW5lci5zaG93KCkuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtdGhpcy5vcHRpb25zLnByZUNvbnRhaW5lck9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0pLnN0b3AoKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMub3B0aW9ucy5wcmVBbmltYXRpb25UaW1lKS5kYXRhKCdtb3ZlJywgJ3JpZ2h0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWN0aXZlU2xpZGUgJiYgdGhpcy4kYWN0aXZlU2xpZGUuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRhY3RpdmVTbGlkZSA9IHRoaXMuJHByZVNsaWRlcnMuZXEodGhpcy5nZXROZXh0SW5kZXgoKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGFjdGl2ZVNsaWRlLnNob3coKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogLXRoaXMucHJlQ29udGFpbmVyQ2VudGVyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnb25IaWRlTmV4dFByZVBhbmVsJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkhpZGVOZXh0UHJlUGFuZWwoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPCB0aGlzLmNvdW50IHx8IHRoaXMub3B0aW9ucy5sb29wKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHByZUNvbnRhaW5lci5zdG9wKCkuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogLXRoaXMub3B0aW9ucy5wcmVDb250YWluZXJPZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5vcHRpb25zLnByZUFuaW1hdGlvblRpbWUsIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRwcmVDb250YWluZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ29uQ2xpY2tOZXh0JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNsaWNrTmV4dCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVCeU5hdigxKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlOYXZCeUluZGV4KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ29uQ2xpY2tQcmV2JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNsaWNrUHJldigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVCeU5hdigtMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TmF2QnlJbmRleCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkaXNwbGF5TmF2JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwbGF5TmF2KCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9vcCAmJiB0aGlzLmNvdW50ID4gMikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRuYXZQcmV2LnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmF2TmV4dC5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TmF2QnlJbmRleCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnZGlzcGxheU5hdkJ5SW5kZXgnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3BsYXlOYXZCeUluZGV4KCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9vcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5hdlByZXYuc2hvdygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5hdlByZXYuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmluZGV4ID09PSB0aGlzLmNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5hdk5leHQuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5hdk5leHQuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnb25Nb3ZlRW5kJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbk1vdmVFbmQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdHJhY2tlci5maW5kKCcuJyArIHRoaXMub3B0aW9ucy5pdGVtKS5hcHBlbmRUbyh0aGlzLiRudWxsQm94KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXMzZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiR0cmFja2VyLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy50cmFuc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdHJhY2tlclswXS5zdHlsZVt0aGlzLnRyYW5zZm9ybV0gPSAndHJhbnNsYXRlWCgwKSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdHJhY2tlci5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMudHJhbnNpdGlvbikuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhZ2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTW92ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnbW92ZUJ5TmF2JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlQnlOYXYoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNb3ZlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJySW5kZXgodGhpcy5pbmRleCArIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU2VsZWN0SXRlbSh0aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmUodGhpcy5pbmRleCwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZURvdCh0aGlzLmluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnb25Nb3VzZUVudGVyJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbk1vdXNlRW50ZXIoKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dENhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnb25Nb3VzZUxlYXZlJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbk1vdXNlTGVhdmUoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ29uRG90Q2xpY2snLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRG90Q2xpY2soZSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMuJGRvdHNFbHMuaW5kZXgoJChlLnRhcmdldCkuY2xvc2VzdCgnLicgKyB0aGlzLm9wdGlvbnMuZG90KSk7XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMuaW5kZXggLSBuZXdJbmRleCA+IDAgPyAtMSA6IDE7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldEN1cnJJbmRleChuZXdJbmRleCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID4gMCAmJiB0aGlzLnN0YWdlcy5uZXh0ICE9PSB0aGlzLmluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRTdGFnZS5maW5kKCcuJyArIHRoaXMub3B0aW9ucy5pdGVtKS5hcHBlbmRUbyh0aGlzLiRudWxsQm94KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFN0YWdlLmFwcGVuZCh0aGlzLiRlbHMuZXEodGhpcy5pbmRleCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uIDwgMCAmJiB0aGlzLnN0YWdlcy5wcmV2ICE9PSB0aGlzLmluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHByZXZTdGFnZS5maW5kKCcuJyArIHRoaXMub3B0aW9ucy5pdGVtKS5hcHBlbmRUbyh0aGlzLiRudWxsQm94KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcHJldlN0YWdlLmFwcGVuZCh0aGlzLiRlbHMuZXEodGhpcy5pbmRleCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMubW92ZSh0aGlzLmluZGV4LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRG90KHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheU5hdkJ5SW5kZXgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnbW92ZScsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZSh0bywgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc01vdmVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb25OYW1lID0gdGhpcy4kcHJlQ29udGFpbmVyLmRhdGEoJ21vdmUnKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSB7fTtcblxuICAgICAgICAgICAgICAgIHByb3BzW2RpcmVjdGlvbk5hbWVdID0gLXRoaXMub3B0aW9ucy5wcmVDb250YWluZXJPZmZzZXQ7XG4gICAgICAgICAgICAgICAgdGhpcy4kcHJlQ29udGFpbmVyLmFuaW1hdGUocHJvcHMsIHRoaXMub3B0aW9ucy5wcmVBbmltYXRpb25UaW1lKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhczNkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHRyYWNrZXIuYWRkQ2xhc3ModGhpcy5vcHRpb25zLnRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiR0cmFja2VyWzBdLnN0eWxlW3RoaXMudHJhbnNmb3JtXSA9ICd0cmFuc2xhdGVYKCcgKyAtZGlyZWN0aW9uICogdGhpcy50cmFja2VyV2lkdGggKyAncHgpJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZnRlclRyYW5zaXRpb24odGhpcy4kdHJhY2tlciwgJ3RyYW5zZm9ybScsIHRoaXMub3B0aW9ucy5tb3ZlVGltZSwgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25Nb3ZlRW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndHJhbnNpdGlvbkVuZCcpO1xuICAgICAgICAgICAgICAgICAgICB9KS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiR0cmFja2VyLnN0b3AoKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IC1kaXJlY3Rpb24gKiB0aGlzLnRyYWNrZXJXaWR0aCArICdweCdcbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5vcHRpb25zLm1vdmVUaW1lLCB0aGlzLm9uTW92ZUVuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ3NldEluaXRpYWxIZWlnaHQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEluaXRpYWxIZWlnaHQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaW5uZXIuaGVpZ2h0KHRoaXMuJGVsLmhlaWdodCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnc2V0QWN0aXZlRG90JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBY3RpdmVEb3QoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnVzZURvdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWN0aXZlRG90LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5kb3RDdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWN0aXZlRG90ID0gdGhpcy4kZG90c0Vscy5lcShpbmRleCkuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmRvdEN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnY3JlYXRlRG90cycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRG90cygpIHtcbiAgICAgICAgICAgICAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgICAgICAgICAgdmFyIGRvdHMgPSB2b2lkIDA7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRkb3RzQm94ID0gJCgnPHVsPicpLmFkZENsYXNzKHRoaXMub3B0aW9ucy5kb3RzKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpbGVuID0gdGhpcy4kZWxzLmxlbmd0aDsgaSA8IGlsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBkb3RzID0gJCgnPGxpPicpLmFkZENsYXNzKHRoaXMub3B0aW9ucy5kb3QpLmFwcGVuZCgnPGk+PC9pPicpO1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChkb3RzWzBdKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRkb3RzQm94WzBdLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLiRkb3RzRWxzID0gdGhpcy4kZG90c0JveC5maW5kKCcuJyArIHRoaXMub3B0aW9ucy5kb3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmFwcGVuZCh0aGlzLiRkb3RzQm94KTtcbiAgICAgICAgICAgICAgICB0aGlzLiRkb3RzQm94LndpZHRoKHRoaXMuJGRvdHNCb3gud2lkdGgoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZG90c0Vscy5lcSgwKS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuZG90Q3VycmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZG90c0JveC5jc3MoJ21hcmdpbkxlZnQnLCAtdGhpcy4kZG90c0JveC53aWR0aCgpIC8gMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2Rlc3Ryb3knLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7fVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdvbicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb24oKSB7fVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdpbmRleCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5kZXgoKSB7fVxuICAgICAgICB9XSk7XG5cbiAgICAgICAgcmV0dXJuIFlhaGlrbztcbiAgICB9KSgpO1xuXG4gICAgO1xuXG4gICAgJC5mbi5ZYWhpa28gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gJCh0aGlzKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGEoJ1lhaGlrbycpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1lhaGlrbyBhbHJlYWR5IGluaXQnLCBpdGVtKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhKCdZYWhpa28nLCBuZXcgWWFoaWtvKGl0ZW0sIG9wdGlvbnMgfHwge30pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn0pKGpRdWVyeSwgd2luZG93LCB1bmRlZmluZWQpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
